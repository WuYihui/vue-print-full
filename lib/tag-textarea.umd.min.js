(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["tag-textarea"]=t():e["tag-textarea"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="112a")}({"112a":function(e,t,n){"use strict";var r;(n.r(t),"undefined"!==typeof window)&&(n("e67d"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));var s=class{constructor(e){this.standards={strict:"strict",loose:"loose",html5:"html5"},this.selectArray=[],this.counter=0,this.settings={standard:this.standards.html5,extraHead:"",extraCss:"",popTitle:"",endCallback:null,ids:"",noPrint:".no-print"},Object.assign(this.settings,e),this.init()}init(){this.counter++,this.settings.id="printArea_"+this.counter;let e=this.getPrintWindow();this.write(e.doc),this.print(e),this.settings.endCallback()}print(e){let t=e.win;const n=()=>{t.focus(),t.print();try{let e=document.getElementById(this.settings.id),t=this.elsdom.querySelectorAll(".canvasImg");console.log(this.elsdom);for(let n=0;n<t.length;n++){let e=t[n].parentNode;e.removeChild(t[n])}e.parentNode.removeChild(e)}catch(e){console.log(e)}};if(window.ActiveXObject)return t.onload=n(),!1;t.onload=()=>{n()}}write(e,t){e.open(),e.write(`${this.docType()}<html>${this.getHead()}${this.getBody()}</html>`),e.close()}docType(){if(this.settings.standard===this.standards.html5)return"<!DOCTYPE html>";var e=this.settings.standard===this.standards.loose?" Transitional":"",t=this.settings.standard===this.standards.loose?"loose":"strict";return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01${e}//EN" "http://www.w3.org/TR/html4/${t}.dtd">`}getHead(){let e="",t="",n=this.settings.noPrint+"{display:none;}";this.settings.extraHead&&this.settings.extraHead.replace(/([^,]+)/g,t=>{e+=t}),[].forEach.call(document.querySelectorAll("link"),(function(e,n){e.href.indexOf(".css")>=0&&(t+=`<link type="text/css" rel="stylesheet" href="${e.href}" >`)}));let r=document.styleSheets;if(r&&r.length>0)for(let i=0;i<r.length;i++)try{if(r[i].cssRules||r[i].rules){let e=r[i].cssRules||r[i].rules;for(let t=0;t<e.length;t++)n+=e[t].cssText}}catch(s){console.log(r[i].href+s)}return this.settings.extraCss&&this.settings.extraCss.replace(/([^,\s]+)/g,e=>{t+=`<link type="text/css" rel="stylesheet" href="${e}">`}),`<head><title>${this.settings.popTitle}</title>${e}${t}<style type="text/css">${n}</style></head>`}getBody(){let e=this.settings.ids;e=e.replace(new RegExp("#","g"),""),this.elsdom=this.beforeHanler(document.getElementById(e));let t=this.getFormData(this.elsdom),n=t.outerHTML;return"<body>"+n+"</body>"}beforeHanler(e){let t=e.querySelectorAll("canvas");for(let n=0;n<t.length;n++)if(!t[n].style.display){let e=t[n].parentNode,r=t[n].toDataURL("image/png"),s=new Image;s.className="canvasImg",s.style.display="none",s.src=r,e.appendChild(s)}return e}getFormData(e){let t=e.cloneNode(!0),n=t.querySelectorAll("input,select,textarea"),r=t.querySelectorAll(".canvasImg,canvas"),s=-1;for(let i=0;i<r.length;i++){let e=r[i].parentNode,t=r[i];"canvas"===t.tagName.toLowerCase()?e.removeChild(t):t.style.display="block"}for(let i=0;i<n.length;i++){let t=n[i],r=t.getAttribute("type"),o=n[i];if(r||(r="SELECT"===t.tagName?"select":"TEXTAREA"===t.tagName?"textarea":""),"INPUT"===t.tagName)"radio"===r||"checkbox"===r?o.setAttribute("checked",t.checked):(o.value=t.value,o.setAttribute("value",t.value));else if("select"===r){s++;for(let n=0;n<e.querySelectorAll("select").length;n++){let r=e.querySelectorAll("select")[n];if(!r.getAttribute("newbs")&&r.setAttribute("newbs",n),r.getAttribute("newbs")==s){let n=e.querySelectorAll("select")[s].selectedIndex;t.options[n].setAttribute("selected",!0)}}}else o.innerHTML=t.value,o.setAttribute("html",t.value)}return t}getPrintWindow(){var e=this.Iframe();return{f:e,win:e.contentWindow||e,doc:e.doc}}Iframe(){let e,t=this.settings.id,n=this;try{e=document.createElement("iframe"),document.body.appendChild(e),e.style.border="0px",e.style.position="absolute",e.style.width="0px",e.style.height="0px",e.style.right="0px",e.style.top="0px",e.setAttribute("id",t),e.setAttribute("src",(new Date).getTime()),e.doc=null,e.doc=e.contentDocument?e.contentDocument:e.contentWindow?e.contentWindow.document:e.document,e.onload=function(){var t=e.contentWindow||e;n.print(t)}}catch(r){throw new Error(r+". iframes may not be supported in this browser.")}if(null==e.doc)throw new Error("Cannot find document.");return e}},i={directiveName:"print",bind(e,t,n){let r=n.context,i=!0,o="";e.addEventListener("click",()=>{r.$nextTick(()=>{if("string"===typeof t.value)o=t.value;else if("object"===typeof t.value&&t.value.id){o=t.value.id;let e=o.replace(new RegExp("#","g"),""),n=document.getElementById(e);n||(console.log("id in Error"),o="")}o?l():window.print()})});const l=()=>{i&&(i=!1,new s({ids:o,standard:"",extraHead:t.value.extraHead,extraCss:t.value.extraCss,popTitle:t.value.popTitle,endCallback(){i=!0}}))}},install:function(e){e.directive("print",i)}},o=i;t["default"]=o},e67d:function(e,t){(function(e){var t="currentScript",n=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(r){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(e in n)if(n[e].src==t||"interactive"==n[e].readyState)return n[e];return null}}})})(document)}})}));
//# sourceMappingURL=tag-textarea.umd.min.js.map